<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../../css/mui.min.css">
		<link rel="stylesheet" href="../../css/main.css" />
	</head>

	<body>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<ul class="mui-table-view mui-table-view-chevron content-list">
					<li v-for="history in histories" class="mui-table-view-cell" style="padding-right: 15px;">
						<div class="mui-pull-left head-icon">
							<img v-bind:src="history.headicon" class="mui-pull-left" />
							<div class="mui-pull-left head-info">
								<span>
									{{history.nickname}}
								</span>
								<span>
									UID:{{history.uid}}
								</span>
							</div>
						</div>
						<div class="mui-pull-right head-info mui-text-right">
							<span style="color: #DD524D">+{{history.transin}}</span>
							<span>{{history.transinTime}}</span>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/vue.min.js"></script>
		<script>
			var mounted = function() {
				mui.init({
					pullRefresh: {
						container: '#pullrefresh',
						down: {
							callback: pulldownRefresh
						},
						up: {
							contentrefresh: '正在加载...',
							callback: pullupRefresh
						}
					}
				});
			}

			function pulldownRefresh() {
				mui('#pullrefresh').pullRefresh().endPulldownToRefresh();
				pageView.histories = [{
					transinId: 1,
					headicon: '../../images/timg.jpeg',
					nickname: '大强',
					uid: '100003',
					transin: '200',
					transinTime: '2018-04-26-13:15:00'
				}];
			}

			function pullupRefresh() {
				mui('#pullrefresh').pullRefresh().endPullupToRefresh();
				pageView.histories = pageView.histories.concat(
					[{
						transinId: 1,
						headicon: '../../images/timg.jpeg',
						nickname: '大强',
						uid: '100003',
						transin: '200',
						transinTime: '2018-04-26-13:15:00'
					}]
				);
			}
			//			if (mui.os.plus) {
			//				mui.plusReady(function() {
			//					setTimeout(function() {
			//						mui('#pullrefresh').pullRefresh().pullupLoading();
			//					}, 10);
			//
			//				});
			//			} else {
			//				mui.ready(function() {
			//					mui('#pullrefresh').pullRefresh().pullupLoading();
			//				});
			//			}

			var pageView = new Vue({
				el: '#pullrefresh',
				data: {
					histories: [{
							transinId: 1,
							headicon: '../../images/timg.jpeg',
							nickname: '小龙',
							uid: '100001',
							transin: '200',
							transinTime: '2018-04-26-13:00:00'
						},
						{
							transinId: 2,
							headicon: '../../images/timg.jpeg',
							nickname: '小虫子',
							uid: '100002',
							transin: '200',
							transinTime: '2018-04-26-13:00:00'
						}
					]
				},
				mounted: mounted
			});
		</script>
	</body>

</html>